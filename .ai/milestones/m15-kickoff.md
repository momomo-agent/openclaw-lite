# M15 Kickoff — 对话稳定性 + 安全 + 设置体验

## 目标
长对话不崩、危险命令有门禁、设置和 Agent 管理面板从"能用"升级到"好用"。

## 核心需求

| Feature | Backlog | 内容 | 优先级 |
|---------|---------|------|--------|
| F041 | B024 | Context compaction — 对话超长时自动摘要压缩 | P0 |
| F042 | B025 | Exec approval — 危险命令弹确认框 | P0 |
| F043 | B033 | 设置面板重构 — 抽屉式分类布局 | P1 |
| F044 | B034 | Agent 管理面板 — 卡片化 + 创建编辑优化 | P1 |

## 红线
- F041 压缩后不能丢失关键上下文（用户名、项目名、当前任务）
- F042 白名单机制：ls/cat/echo 等安全命令直接放行
- F043/F044 参考 OpenClaw 源码设计
- 所有改动向后兼容

## 交付标准
- [ ] 对话超过 token 阈值时自动压缩，用户无感
- [ ] rm/sudo/kill 等命令弹确认框，用户可批准或拒绝
- [ ] 设置面板分类清晰，不再是一个 modal 塞所有选项
- [ ] Agent 卡片展示 soul 预览、model、工具权限
- [ ] 打包签名公证通过
